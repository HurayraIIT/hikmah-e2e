# Test info

- Name: settings - should allow users to view existing profile information
- Location: /home/runner/work/hikmah-e2e/hikmah-e2e/tests/settings/profile-settings.spec.ts:7:1

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toHaveAttribute(expected)

Locator: getByText('Gender', { exact: true }).locator('../..').locator('span')
Expected string: "Male"
Received: <element(s) not found>
Call log:
  - expect.toHaveAttribute with timeout 5000ms
  - waiting for getByText('Gender', { exact: true }).locator('../..').locator('span')

    at /home/runner/work/hikmah-e2e/hikmah-e2e/tests/settings/profile-settings.spec.ts:51:94
```

# Page snapshot

```yaml
- link:
  - /url: javascript:void(0)
  - img
- link "Khalid Yusuf":
  - /url: /@wpdabh
  - img "Khalid Yusuf"
- link "Khalid Yusuf":
  - /url: /@wpdabh
- link "@wpdabh":
  - /url: /@wpdabh
- paragraph: 32 Followers
- button:
  - img
- list:
  - listitem:
    - link "Your Feed":
      - /url: /
  - listitem:
    - link "My posts":
      - /url: /@wpdabh
  - listitem:
    - link "Lists":
      - /url: /lists
  - listitem:
    - link "My pages":
      - /url: /my-pages
  - listitem:
    - link "Saved posts":
      - /url: /bookmarks
  - listitem:
    - link "Settings":
      - /url: /settings
  - listitem:
    - link "Invite":
      - /url: /invites
  - listitem: Logout
- button "+ Add New Post"
- text: Copyright 2025 by Hikmah — A Kahf Software Initiative
- link "Support":
  - /url: /support
- text: ·
- link "Privacy Policy":
  - /url: /privacy-policy
- text: ·
- link "Terms & Conditions":
  - /url: /terms-and-conditions
- banner:
  - textbox "Search"
  - img
  - link "Invite":
    - /url: /invites
    - img
    - text: Invite
  - button:
    - img
  - button "9+":
    - img
    - text: 9+
  - link "Khalid Yusuf":
    - /url: /@wpdabh
    - img "Khalid Yusuf"
- link "Profile":
  - /url: /settings
- link "Display":
  - /url: /settings/display
- button "Delete Account"
- img
- heading "Khalid Yusuf" [level=5]
- button "Change profile photo"
- text: Email
- textbox: wpdabh@gmail.com
- text: Display Name
- textbox: Khalid Yusuf
- text: Username
- textbox: wpdabh
- text: Language
- combobox "Bangla"
- text: Bio
- textbox: This is the bio.
- text: About
- textbox: This is the about content.
- text: Location
- combobox "United States"
- combobox "State"
- textbox "Zip Code": "1212"
- textbox "Address": Mirpur, Dhaka
- text: Sex
- combobox "Male"
- text: Birthday
- combobox: 2001-01-02
- text: Timezone
- combobox "Asia/Dhaka (UTC+6:00)"
- text: Link
- textbox: https://wpdabh.com
- button:
  - img
- textbox: https://github.com/wpdabh
- button:
  - img
- button "Add more link"
- button "Save"
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { randomSlug, randomString } from '../../utils/random-data';
   3 |
   4 | const hikmahAuthFile = `playwright/.auth/hikmah01.json`;
   5 | const customLink = `https://x.com/${randomSlug()}`;
   6 |
   7 | test("settings - should allow users to view existing profile information", async ({ browser }) => {
   8 |     const context = await browser.newContext({ storageState: hikmahAuthFile });
   9 |     const page = await context.newPage();
  10 |     await page.goto('/');
  11 |
  12 |     // Ensure user is logged in
  13 |     await expect.soft(page.locator('#sidebarUserMenu').getByText('Khalid Yusuf')).toBeVisible();
  14 |
  15 |     // Navigate to the settings page > Profile Section
  16 |     await expect(page.getByRole('link', { name: 'Settings' })).toBeVisible();
  17 |     await page.getByRole('link', { name: 'Settings' }).click();
  18 |
  19 |     await expect(page.getByRole('link', { name: 'Profile' })).toBeVisible();
  20 |     await expect(page.locator('#mainContent img')).toBeVisible();
  21 |     await expect(page.getByRole('heading', { name: 'Khalid Yusuf' })).toBeVisible();
  22 |     await expect(page.getByRole('button', { name: 'Change profile photo' })).toBeVisible();
  23 |
  24 |     // Verify the saved values
  25 |
  26 |     // Email
  27 |     await expect(page.getByText("Email", { exact: true }).locator('../..').locator('input')).toHaveAttribute('value', "wpdabh@gmail.com");
  28 |     await expect(page.getByText("Email", { exact: true }).locator('../..').locator('input')).toHaveAttribute('readonly');
  29 |
  30 |     // Display Name
  31 |     await expect(page.getByText("Display Name", { exact: true }).locator('../..').locator('input')).toHaveAttribute('value', "Khalid Yusuf");
  32 |
  33 |     // Username
  34 |     await expect(page.getByText("Username", { exact: true }).locator('../..').locator('input')).toHaveAttribute('value', "wpdabh");
  35 |
  36 |     // Language
  37 |     await expect(page.getByText("Language", { exact: true }).locator('../..').locator('span')).toHaveAttribute('aria-label', "Bangla");
  38 |
  39 |     // Bio
  40 |     await expect(page.getByText("Bio", { exact: true }).locator('../..').locator('textarea')).toHaveAttribute('value', "This is the bio.");
  41 |
  42 |     // About
  43 |     await expect(page.getByText("About", { exact: true }).locator('../..').locator('textarea')).toHaveAttribute('value', "This is the about content.");
  44 |
  45 |     // Location
  46 |     // await expect(page.getByText("Location", { exact: true }).locator('../..').locator('span')).toHaveAttribute('aria-label', "Bangladesh");
  47 |     await expect(page.getByText("Location", { exact: true }).locator('../..').getByPlaceholder('Zip Code')).toHaveAttribute('value', "1212");
  48 |     await expect(page.getByText("Location", { exact: true }).locator('../..').getByPlaceholder('Address')).toHaveAttribute('value', "Mirpur, Dhaka");
  49 |
  50 |     // Gender
> 51 |     await expect(page.getByText("Gender", { exact: true }).locator('../..').locator('span')).toHaveAttribute('aria-label', "Male");
     |                                                                                              ^ Error: Timed out 5000ms waiting for expect(locator).toHaveAttribute(expected)
  52 |
  53 |     // Birthday
  54 |     await expect(page.getByText("Birthday", { exact: true }).locator('../..').locator('span')).toHaveAttribute('data-pc-name', "calendar");
  55 |
  56 |     // Timezone
  57 |     await expect(page.getByText("Timezone", { exact: true }).locator('../..').locator('span')).toHaveAttribute('aria-label', "Asia/Dhaka (UTC+6:00)");
  58 |
  59 |     // Links
  60 |     await expect(page.getByText("Link", { exact: true }).locator('../..').locator('input[value="https://wpdabh.com"]')).toBeVisible();
  61 |     await expect(page.getByText("Link", { exact: true }).locator('../..').locator('input[value="https://github.com/wpdabh"]')).toBeVisible();
  62 | });
  63 |
  64 | test("settings - should allow users to save new profile information", async ({ browser }) => {
  65 |     const context = await browser.newContext({ storageState: hikmahAuthFile });
  66 |     const page = await context.newPage();
  67 |     await page.goto('/');
  68 |
  69 |     // Ensure user is logged in
  70 |     await expect.soft(page.locator('#sidebarUserMenu').getByText('Khalid Yusuf')).toBeVisible();
  71 |
  72 |     // Navigate to the settings page > Profile Section
  73 |     await expect(page.getByRole('link', { name: 'Settings' })).toBeVisible();
  74 |     await page.getByRole('link', { name: 'Settings' }).click();
  75 |
  76 |     // Add a new link and save
  77 |     await expect(page.getByRole('button', { name: 'Add more link' })).toBeVisible();
  78 |     await page.getByRole('button', { name: 'Add more link' }).click();
  79 |     await page.getByText("Link", { exact: true }).locator('../..').locator('input[value=""]').fill(customLink);
  80 |     await expect(page.getByRole('button', { name: 'Save' })).toBeVisible();
  81 |     await page.getByRole('button', { name: 'Save' }).click();
  82 |     await page.getByText('Your changes have been saved.').waitFor();
  83 |     await expect(page.getByText('Your changes have been saved.')).toBeVisible();
  84 |
  85 |     // Reload and verify the newly added link
  86 |     await page.goto('/settings');
  87 |     await expect(page.getByText("Link", { exact: true }).locator('../..').locator(`input[value="${customLink}"]`)).toBeVisible();
  88 |
  89 |     // Now remove the link, save and verify
  90 |     await page.getByText("Link", { exact: true }).locator('../..').locator(`input[value="${customLink}"]`).locator('../../..').getByRole("button").click();
  91 |     await page.getByRole('button', { name: 'Save' }).click();
  92 |     await page.getByText('Your changes have been saved.').waitFor();
  93 |     await expect(page.getByText('Your changes have been saved.')).toBeVisible();
  94 |
  95 |     await page.goto('/settings');
  96 |     await expect(page.getByText("Link", { exact: true }).locator('../..').locator(`input[value="${customLink}"]`)).not.toBeVisible();
  97 | });
```