# Test info

- Name: hashtags - should display the homepage interest section
- Location: /home/runner/work/hikmah-e2e/hikmah-e2e/tests/tags.spec.ts:13:1

# Error details

```
Error: Timed out 5000ms waiting for expect(locator).toBeVisible()

Locator: getByRole('heading', { name: 'Interest' })
Expected: visible
Received: <element(s) not found>
Call log:
  - expect.toBeVisible with timeout 5000ms
  - waiting for getByRole('heading', { name: 'Interest' })

    at /home/runner/work/hikmah-e2e/hikmah-e2e/tests/tags.spec.ts:20:67
```

# Page snapshot

```yaml
- link:
  - /url: javascript:void(0)
  - img
- link "Khalid Yusuf":
  - /url: /@wpdabh
  - img "Khalid Yusuf"
- link "Khalid Yusuf":
  - /url: /@wpdabh
- link "@wpdabh":
  - /url: /@wpdabh
- paragraph: 32 Followers
- button:
  - img
- list:
  - listitem:
    - link "Your Feed":
      - /url: /
  - listitem:
    - link "My posts":
      - /url: /@wpdabh
  - listitem:
    - link "Lists":
      - /url: /lists
  - listitem:
    - link "My pages":
      - /url: /my-pages
  - listitem:
    - link "Saved posts":
      - /url: /bookmarks
  - listitem:
    - link "Settings":
      - /url: /settings
  - listitem:
    - link "Invite":
      - /url: /invites
  - listitem: Logout
- button "+ Add New Post"
- text: Copyright 2025 by Hikmah — A Kahf Software Initiative
- link "Support":
  - /url: /support
- text: ·
- link "Privacy Policy":
  - /url: /privacy-policy
- text: ·
- link "Terms & Conditions":
  - /url: /terms-and-conditions
- banner:
  - textbox "Search"
  - img
  - link "Invite":
    - /url: /invites
    - img
    - text: Invite
  - button:
    - img
  - button "9+":
    - img
    - text: 9+
  - link "Khalid Yusuf":
    - /url: /@wpdabh
    - img "Khalid Yusuf"
- link "Profile":
  - /url: /settings
- link "Display":
  - /url: /settings/display
- button "Delete Account"
- img
- heading "Khalid Yusuf" [level=5]
- button "Change profile photo"
- text: Email
- textbox: wpdabh@gmail.com
- text: Display Name
- textbox: Khalid Yusuf
- text: Username
- textbox: wpdabh
- text: Language
- combobox "Bangla"
- text: Bio
- textbox: This is the bio.
- text: About
- textbox: This is the about content.
- text: Location
- combobox "United States"
- combobox "State"
- textbox "Zip Code": "1212"
- textbox "Address": Mirpur, Dhaka
- text: Sex
- combobox "Male"
- text: Birthday
- combobox: 2001-01-02
- text: Timezone
- combobox "Asia/Dhaka (UTC+6:00)"
- text: Link
- textbox: https://wpdabh.com
- button:
  - img
- textbox: https://github.com/wpdabh
- button:
  - img
- button "Add more link"
- button "Save"
```

# Test source

```ts
   1 | import { test, expect } from '@playwright/test';
   2 | import { randomSlug, randomString } from '../utils/random-data';
   3 |
   4 | const kahfIdAuthFile = `playwright/.auth/kahf01.json`;
   5 | const hikmahAuthFile = `playwright/.auth/hikmah01.json`;
   6 |
   7 | test("hashtags - should not let unauthenticated users access the tags page", async ({ page }) => {
   8 |     await page.goto(`https://hikmah.net/hashtags/suggest`);
   9 |     await expect(page.getByRole('heading', { name: 'Sign In' })).toBeVisible();
  10 |     await expect(page.getByText('Welcome to Hikmah')).toBeVisible();
  11 | });
  12 |
  13 | test("hashtags - should display the homepage interest section", async ({ browser }) => {
  14 |     const context = await browser.newContext({ storageState: hikmahAuthFile });
  15 |     const page = await context.newPage();
  16 |     await page.goto('/');
  17 |     await page.waitForLoadState('domcontentloaded');
  18 |     await page.waitForTimeout(3000);
  19 |
> 20 |     await expect(page.getByRole('heading', { name: 'Interest' })).toBeVisible();
     |                                                                   ^ Error: Timed out 5000ms waiting for expect(locator).toBeVisible()
  21 |     await expect(page.locator('div').filter({ hasText: /^InterestView All$/ }).getByRole('link')).toBeVisible();
  22 |
  23 |     const interest_box = page.locator("div#right div.widget-box").nth(1);
  24 |     expect.soft(interest_box).toBeVisible();
  25 |
  26 |     // There should be 10 tags + 1 "view all" button
  27 |     const tags = interest_box.locator("div.flex a");
  28 |     expect.soft(await tags.count()).toBe(11);
  29 |
  30 |     // Click on a tag and verify
  31 |     await tags.nth(5).click();
  32 |     await page.waitForTimeout(500);
  33 |     await page.waitForLoadState('domcontentloaded');
  34 |
  35 |     expect.soft(page).toHaveURL(/hikmah\.net\/search\/hashtag\/page\?q=/);
  36 |     await expect.soft(page.getByText('Post', { exact: true })).toBeVisible();
  37 |     await expect.soft(page.getByText('People', { exact: true })).toBeVisible();
  38 |     await expect.soft(page.getByText('Page', { exact: true })).toBeVisible();
  39 |     await page.getByText('People', { exact: true }).click();
  40 |     await page.getByText('Page', { exact: true }).click();
  41 |     await page.getByText('Post', { exact: true }).click();
  42 | });
  43 |
  44 | test("hashtags - should show all hashtags in the hashtags suggest page", async ({ browser }) => {
  45 |     const context = await browser.newContext({ storageState: hikmahAuthFile });
  46 |     const page = await context.newPage();
  47 |     await page.goto('/');
  48 |     await page.waitForLoadState('domcontentloaded');
  49 |     await page.waitForTimeout(3000);
  50 |
  51 |     const viewAllHashtagsLink = page.locator('a[href="/hashtags/suggest"]', {
  52 |         hasText: 'View All'
  53 |     });
  54 |     await viewAllHashtagsLink.click();
  55 |     await page.waitForTimeout(500);
  56 |     await page.waitForLoadState('domcontentloaded');
  57 |
  58 |     // verify the page contents
  59 |     await expect(page.getByRole('textbox', { name: 'Search' })).toBeVisible();
  60 |     await expect(page.getByRole('heading', { name: 'Tags for you' })).toBeVisible();
  61 |     await expect(page.getByRole('textbox', { name: 'Enter tags' })).toBeVisible();
  62 |
  63 |     // There should be no negative numbers in the post counts
  64 |     await page.locator('#center div.list_items_sub_text_color').first().waitFor();
  65 |     const count = await page.locator('#center div.list_items_sub_text_color').getByText(/-\d+ posts/).count();
  66 |     // console.log(`Count: ${count}`);
  67 |     // expect.soft(count).toBe(0);
  68 |
  69 |     // Search for a tag
  70 |     await page.getByRole('textbox', { name: 'Enter tags' }).click();
  71 |     await page.getByRole('textbox', { name: 'Enter tags' }).fill('Karate_Overhung_Mourner_Freight_Reach9_Swinger');
  72 |     await page.waitForTimeout(1000);
  73 |     await expect(page.getByRole('link', { name: 'Karate_Overhung_Mourner_Freight_Reach9_Swinger 2 posts' })).toBeVisible();
  74 |     await expect(page.locator('#center').getByRole('button', { name: 'Follow' })).toBeVisible();
  75 |     await page.getByRole('link', { name: 'Karate_Overhung_Mourner_Freight_Reach9_Swinger 2 posts' }).click();
  76 |     await expect(page.getByText('#Karate_Overhung_Mourner_Freight_Reach9_Swinger Follow')).toBeVisible();
  77 |     await expect(page.locator('#center').getByText('Khalid Yusuf')).toBeVisible();
  78 |     await expect(page.getByRole('paragraph').filter({ hasText: 'May Allah grant us jannah.' })).toBeVisible();
  79 |     await page.getByText('People').click();
  80 |     await expect(page.getByText('Khalid Yusuf@wpdabh')).toBeVisible();
  81 |     await page.getByText('Page', { exact: true }).click();
  82 |     await expect(page.getByText('No pages found')).toBeVisible();
  83 | });
```